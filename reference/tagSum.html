<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>General summary of detections for each tag — tagSum • motus</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="General summary of detections for each tag — tagSum"><meta name="description" content="Creates a summary for each tag of it's first and last detection time (ts),
first and last detection site, length of time between first and last
detection, straight line distance between first and last detection site, rate
of movement, and bearing. Lat/lons are taken from gpsLat/gpsLon, or if
missing, from recvDeployLat/recvDeployLon. Bearing is calculated using
the geosphere::bearing() function."><meta property="og:description" content="Creates a summary for each tag of it's first and last detection time (ts),
first and last detection site, length of time between first and last
detection, straight line distance between first and last detection site, rate
of movement, and bearing. Lat/lons are taken from gpsLat/gpsLon, or if
missing, from recvDeployLat/recvDeployLon. Bearing is calculated using
the geosphere::bearing() function."><meta property="og:image" content="https://motuswts.github.io/motus/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-dark" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">motus</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">6.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/motus.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/01-introduction.html">Chapter 1 - Introduction</a></li>
    <li><a class="dropdown-item" href="../articles/02-installing-packages.html">Chapter 2 - Installing packages</a></li>
    <li><a class="dropdown-item" href="../articles/03-accessing-data.html">Chapter 3 - Accessing detections data</a></li>
    <li><a class="dropdown-item" href="../articles/04-deployments.html">Chapter 4 - Tag and receiver deployments</a></li>
    <li><a class="dropdown-item" href="../articles/05-data-cleaning.html">Chapter 5 - Data Cleaning</a></li>
    <li><a class="dropdown-item" href="../articles/06-exploring-data.html">Chapter 6 - Exploring detections data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../articles/troubleshooting.html">Troubleshooting</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/MotusWTS/motus/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>General summary of detections for each tag</h1>
      <small class="dont-index">Source: <a href="https://github.com/MotusWTS/motus/blob/hotfix-bandNumber/R/tagSum.R" class="external-link"><code>R/tagSum.R</code></a></small>
      <div class="d-none name"><code>tagSum.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a summary for each tag of it's first and last detection time (<code>ts</code>),
first and last detection site, length of time between first and last
detection, straight line distance between first and last detection site, rate
of movement, and bearing. Lat/lons are taken from <code>gpsLat</code>/<code>gpsLon</code>, or if
missing, from <code>recvDeployLat</code>/<code>recvDeployLon</code>. Bearing is calculated using
the <code><a href="https://rdrr.io/pkg/geosphere/man/bearing.html" class="external-link">geosphere::bearing()</a></code> function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tagSum</span><span class="op">(</span><span class="va">df_src</span>, <span class="va">data</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df-src">df_src<a class="anchor" aria-label="anchor" href="#arg-df-src"></a></dt>
<dd><p>Data frame, SQLite connection, or SQLite table. An SQLite
connection would be the result of <code>tagme(XXX)</code> or
<code>DBI::dbConnect(RSQLite::SQLite(), "XXX.motus")</code>; an SQLite table would be
the result of <code>dplyr::tbl(tags, "alltags")</code>; a data frame could be the
result of <code>dplyr::tbl(tags, "alltags") %&gt;% dplyr::collect()</code>.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>Defunct, use <code>src</code>, <code>df_src</code>, or <code>df</code> instead.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A flat data frame with the following for each tag:</p><ul><li><p><code>fullID</code> - <code>fullID</code> of Motus registered tag</p></li>
<li><p><code>first_ts</code> - Time (<code>ts</code>) of first detection</p></li>
<li><p><code>last_ts</code> - Time (<code>ts</code>) of last detection</p></li>
<li><p><code>first_site</code> - First detection site (<code>recvDeployName</code>)</p></li>
<li><p><code>last_site</code> - Last detection site (<code>recvDeployName</code>)</p></li>
<li><p><code>recvLat.x</code> - Latitude of first detection site (<code>gpsLat</code> or <code>recvDeployLat</code>)</p></li>
<li><p><code>recvLon.x</code> - Longitude of first detection site (<code>gpsLon</code> or <code>recvDeployLon</code>)</p></li>
<li><p><code>recvLat.y</code> - Latitude of last detection site (<code>gpsLat</code> or <code>recvDeployLat</code>)</p></li>
<li><p><code>recvLon.y</code> - Longitude of last detection site (<code>gpsLon</code> or <code>recvDeployLon</code>)</p></li>
<li><p><code>tot_ts</code> - Time between first and last detection (in seconds)</p></li>
<li><p><code>dist</code> - Straight line distance between first and last detection site (in metres)</p></li>
<li><p><code>rate</code> - Overall rate of movement (<code>tot_ts</code>/<code>dist</code>), in metres/second</p></li>
<li><p><code>bearing</code> - Bearing between first and last detection sites</p></li>
<li><p><code>num_det</code> - Number of detections summarized</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Download sample project 176 to .motus database (username/password are "motus.sample")</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="va">sql_motus</span> <span class="op">&lt;-</span> <span class="fu"><a href="tagme.html">tagme</a></span><span class="op">(</span><span class="fl">176</span>, new <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># \dontrun{}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or use example data base in memory</span></span></span>
<span class="r-in"><span><span class="va">sql_motus</span> <span class="op">&lt;-</span> <span class="fu"><a href="tagmeSample.html">tagmeSample</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Summarize tags</span></span></span>
<span class="r-in"><span><span class="va">tag_summary</span> <span class="op">&lt;-</span> <span class="fu">tagSum</span><span class="op">(</span><span class="va">sql_motus</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 'df_src' is a complete motus data base, using 'alltagsGPS' view</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For specific SQLite table/view (needs gpsLat/gpsLon) --------------</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbl_alltagsGPS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">sql_motus</span>, <span class="st">"alltagsGPS"</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="va">tag_summary</span> <span class="op">&lt;-</span> <span class="fu">tagSum</span><span class="op">(</span><span class="va">tbl_alltagsGPS</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For a flattened data frame ----------------------------------------</span></span></span>
<span class="r-in"><span><span class="va">df_alltagsGPS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="va">tbl_alltagsGPS</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tag_summary</span> <span class="op">&lt;-</span> <span class="fu">tagSum</span><span class="op">(</span><span class="va">df_alltagsGPS</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Can be filtered, e.g., for only a few tags</span></span></span>
<span class="r-in"><span><span class="va">tag_summary</span> <span class="op">&lt;-</span> <span class="fu">tagSum</span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">tbl_alltagsGPS</span>, <span class="va">motusTagID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">16047</span>, <span class="fl">16037</span>, <span class="fl">16039</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Birds Canada, John Brzustowski, Denis Lepage.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

