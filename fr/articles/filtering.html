<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="motus">
<title>In-depth detections filtering • motus</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="In-depth detections filtering">
<meta property="og:description" content="motus">
<meta name="robots" content="noindex">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Passer au contenu</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">motus</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Version en développement">4.0.6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Activer la navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/motus.html">Prise en main</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Référence</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/motus.html">Getting started</a>
    <a class="dropdown-item" href="../articles/troubleshooting.html">Troubleshooting</a>
    <a class="dropdown-item" href="../articles/motus-data.html">Understanding Motus Data</a>
    <a class="dropdown-item" href="../articles/database-variables.html">Database Variables</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">Plus d'articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changements</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Activer la navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Rechercher" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/motusWTS/motus/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../../index.html">EN</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../index.html">FR</a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="filtering_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>In-depth detections filtering</h1>
            
      
      <small class="dont-index">Source : <a href="https://github.com/motusWTS/motus/blob/HEAD/vignettes/articles/filtering.Rmd" class="external-link"><code>vignettes/articles/filtering.Rmd</code></a></small>
      <div class="d-none name"><code>filtering.Rmd</code></div>
    </div>

    
    
<p>Invariably you will run into some false detections in your tag detection data. Sometimes these may be due to random glitches or noisy radio conditions. The various outputs on the Motus web site are pre-filtered, but data downloaded via the <code>motus</code> R package provides access to <strong>all</strong> detections, allowing users more control over which detections to keep or omit.</p>
<p>Therefore, it is important to filter these out as part of your data cleaning process. <a href="05-data-cleaning.html">Chapter 5 - Data cleaning</a> is a good place to start for a walk-through), and in this article we’ll cover in more detail two methods of filtering out dubious hits based on radio noise (activity) and run lengths.</p>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/motusWTS/motus" class="external-link">motus</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span>

<span class="va">tags</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tagme.html">tagme</a></span><span class="op">(</span><span class="fl">176</span>, update <span class="op">=</span> <span class="cn">TRUE</span>, new <span class="op">=</span> <span class="cn">FALSE</span>, dir <span class="op">=</span> <span class="st">"./data"</span><span class="op">)</span></code></pre></div>
<p>As runs are composed of sequences of hits, the longer the run the more confident we can be that it represents a true detection.</p>
<p>Run lengths are <code>runLen</code> in the <code>alltags</code> view.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">tags</span>, <span class="st">"alltags"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">hitID</span>, <span class="va">runID</span>, <span class="va">batchID</span>, <span class="va">motusTagID</span>, <span class="va">runLen</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># Source:   lazy query [?? x 5]</span></span>
<span class="co">## <span style="color: #949494;"># Database: sqlite 3.37.0</span></span>
<span class="co"><span style="color: #949494;">## #   [/home/runner/work/motus/motus/vignettes/articles/data/project-176.motus]</span></span>
<span class="co">##     hitID runID batchID motusTagID runLen</span>
<span class="co">##     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">45</span>107  <span style="text-decoration: underline;">8</span>886      53      <span style="text-decoration: underline;">16</span>047      5</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">45</span>108  <span style="text-decoration: underline;">8</span>886      53      <span style="text-decoration: underline;">16</span>047      5</span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">45</span>109  <span style="text-decoration: underline;">8</span>886      53      <span style="text-decoration: underline;">16</span>047      5</span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">45</span>110  <span style="text-decoration: underline;">8</span>886      53      <span style="text-decoration: underline;">16</span>047      5</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">45</span>111  <span style="text-decoration: underline;">8</span>886      53      <span style="text-decoration: underline;">16</span>047      5</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> <span style="text-decoration: underline;">199</span>885 <span style="text-decoration: underline;">23</span>305      64      <span style="text-decoration: underline;">16</span>047     11</span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> <span style="text-decoration: underline;">199</span>886 <span style="text-decoration: underline;">23</span>305      64      <span style="text-decoration: underline;">16</span>047     11</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> <span style="text-decoration: underline;">199</span>887 <span style="text-decoration: underline;">23</span>305      64      <span style="text-decoration: underline;">16</span>047     11</span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> <span style="text-decoration: underline;">199</span>888 <span style="text-decoration: underline;">23</span>305      64      <span style="text-decoration: underline;">16</span>047     11</span>
<span class="co">## <span style="color: #BCBCBC;">10</span> <span style="text-decoration: underline;">199</span>889 <span style="text-decoration: underline;">23</span>305      64      <span style="text-decoration: underline;">16</span>047     11</span>
<span class="co">## <span style="color: #949494;"># … with more rows</span></span></code></pre>
<p>However, local conditions at an individual receiver may vary in their exposure to background radio noise/interference. Sites with relatively more background noise may be more prone to generating a high number of very short runs that are in reality spurious data.</p>
<p>The <code>activity</code> table contains information on the number of runs (<code>numRuns</code>) and how many of these runs were particularly short (i.e. 2 hits <code>run2</code> or 3 hits <code>run3</code>, etc.)</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">tags</span>, <span class="st">"activity"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">batchID</span>, <span class="va">motusDeviceID</span>, <span class="va">ant</span>, <span class="va">year</span>, <span class="va">month</span>, <span class="va">day</span>, <span class="va">hourBin</span>, <span class="va">numRuns</span>, <span class="va">run2</span>, <span class="va">run3</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># Source:   lazy query [?? x 10]</span></span>
<span class="co">## <span style="color: #949494;"># Database: sqlite 3.37.0</span></span>
<span class="co"><span style="color: #949494;">## #   [/home/runner/work/motus/motus/vignettes/articles/data/project-176.motus]</span></span>
<span class="co">##    batchID motusDeviceID ant    year month   day hourBin numRuns  run2  run3</span>
<span class="co">##      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>      53           486 1      <span style="text-decoration: underline;">2</span>015     9    25  <span style="text-decoration: underline;">400</span>872       1     0     0</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>      53           486 1      <span style="text-decoration: underline;">2</span>015     9    30  <span style="text-decoration: underline;">401</span>014       1     0     0</span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>      53           486 1      <span style="text-decoration: underline;">2</span>015    10     8  <span style="text-decoration: underline;">401</span>204       1     0     0</span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>      53           486 -1     <span style="text-decoration: underline;">2</span>015     9    30  <span style="text-decoration: underline;">401</span>014       1     1     0</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>      53           486 -1     <span style="text-decoration: underline;">2</span>015    10     8  <span style="text-decoration: underline;">401</span>204       1     0     0</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span>      53           486 2      <span style="text-decoration: underline;">2</span>015     9    30  <span style="text-decoration: underline;">401</span>012       1     0     1</span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span>      53           486 2      <span style="text-decoration: underline;">2</span>015     9    30  <span style="text-decoration: underline;">401</span>014       1     1     0</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span>      53           486 2      <span style="text-decoration: underline;">2</span>015    10     8  <span style="text-decoration: underline;">401</span>204       1     0     0</span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span>      53           486 3      <span style="text-decoration: underline;">2</span>015     9    21  <span style="text-decoration: underline;">400</span>796       1     1     0</span>
<span class="co">## <span style="color: #BCBCBC;">10</span>      53           486 3      <span style="text-decoration: underline;">2</span>015     9    25  <span style="text-decoration: underline;">400</span>872       1     0     1</span>
<span class="co">## <span style="color: #949494;"># … with more rows</span></span></code></pre>
<p>Therefore a good first pass filter should use both the length of a run and the amount of radio activity (number of short runs) at a given site to determine whether or not to remove a run of hits.</p>
</div>
<div class="section level2">
<h2 id="empirically-based-cutoffs">Empirically-based cutoffs<a class="anchor" aria-label="anchor" href="#empirically-based-cutoffs"></a>
</h2>
<p>Based on these ideas and through empirical examination of data, the Motus team have determined a set of specific cutoffs that work well as a default filter.</p>
<p>In general, short runs (with a length of only 2 or 3) have a relatively high probability of being false positive detections. In contrast, long runs (with a length of 5 or more) have a high probability of being true positives. Therefore, runs with a length 3 or less are conservatively considered invalid, and runs with a length of 5 or more are considered valid.</p>
<p>At noisy sites, there is a greater chance of having spurious detections. Therefore, intermediate runs (with a length of 4), are considered valid at quiet sites, but likely invalid at noisy sites. Noisy sites are categorized as those with many runs (&gt;= 100) and a high ratio of runs with lengths of 2 at a given time (&gt;= 85%).</p>
</div>
<div class="section level2">
<h2 id="filtering-in-motus">Filtering in <code>motus</code><a class="anchor" aria-label="anchor" href="#filtering-in-motus"></a>
</h2>
<p>There are two filtering options in the <code>motus</code> R package that follow these ideas:</p>
<ol style="list-style-type: decimal">
<li>Easiest is the field/column called <code>motusFilter</code> found in the <code>runs</code> table <a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;If you are working with a dataset downloaded through &lt;code&gt;&lt;a href="../reference/tagme.html"&gt;tagme()&lt;/a&gt;&lt;/code&gt; prior to July 2019 it will not include those values. In those cases, you will either need to download a new copy of the entire dataset for your project or receiver, or to use the &lt;code&gt;&lt;a href="../reference/filterByActivity.html"&gt;filterByActivity()&lt;/a&gt;&lt;/code&gt; function described below to calculate the missing values.&lt;/p&gt;'><sup>1</sup></a>
</li>
<li>More customizable, is the function called <code><a href="../reference/filterByActivity.html">filterByActivity()</a></code>
</li>
</ol>
<div class="section level3">
<h3 id="motusfilter">
<code>motusFilter</code><a class="anchor" aria-label="anchor" href="#motusfilter"></a>
</h3>
<p>The column/field <code>motusFilter</code> in the <code>runs</code> table is a filter value created on the server that reflects</p>
<ol style="list-style-type: decimal">
<li>
<a href="#empirically-based-cutoffs">Empirically-based cutoffs</a> defined above</li>
<li>Some manual filtering based on aliasing or out-of-range records <a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Future version of the &lt;code&gt;motus&lt;/code&gt; package should give users access to specific information on why each run was filtered (activity/noise or a manual assessment).&lt;/p&gt;"><sup>2</sup></a>
</li>
</ol>
<p>This is a good first option for identifying detections that have a higher probability of being false. Currently the <code>motusFilter</code> contains just two values <code>0</code> or <code>1</code>. Runs with a <code>motusFilter</code> of <code>0</code> are considered “invalid” (i.e. have a low probability of being true detections) and could therefore be omitted.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">tags</span>, <span class="st">"runs"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># Source:   table&lt;runs&gt; [?? x 10]</span></span>
<span class="co">## <span style="color: #949494;"># Database: sqlite 3.37.0</span></span>
<span class="co"><span style="color: #949494;">## #   [/home/runner/work/motus/motus/vignettes/articles/data/project-176.motus]</span></span>
<span class="co">##     runID batchIDbegin     tsBegin  tsEnd  done motusTagID ant     len nodeNum motusFilter</span>
<span class="co">##     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>   <span style="text-decoration: underline;">8</span>886           53 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">858</span>390. 1.45<span style="color: #949494;">e</span>9     1      <span style="text-decoration: underline;">16</span>047 3         5 <span style="color: #BB0000;">NA</span>                1</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">23</span>305           64 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">857</span>924. 1.45<span style="color: #949494;">e</span>9     1      <span style="text-decoration: underline;">16</span>047 1        11 <span style="color: #BB0000;">NA</span>                1</span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">23</span>306           64 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">858</span>341. 1.45<span style="color: #949494;">e</span>9     1      <span style="text-decoration: underline;">16</span>047 3         6 <span style="color: #BB0000;">NA</span>                1</span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">23</span>307           64 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">858</span>497. 1.45<span style="color: #949494;">e</span>9     1      <span style="text-decoration: underline;">16</span>047 2         5 <span style="color: #BB0000;">NA</span>                1</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">23</span>308           64 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">858</span>826. 1.45<span style="color: #949494;">e</span>9     1      <span style="text-decoration: underline;">16</span>047 2         5 <span style="color: #BB0000;">NA</span>                1</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> <span style="text-decoration: underline;">104</span>118          141 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">858</span>904. 1.45<span style="color: #949494;">e</span>9     1      <span style="text-decoration: underline;">16</span>047 2         3 <span style="color: #BB0000;">NA</span>                0</span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> <span style="text-decoration: underline;">104</span>119          141 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">858</span>875. 1.45<span style="color: #949494;">e</span>9     1      <span style="text-decoration: underline;">16</span>047 3         3 <span style="color: #BB0000;">NA</span>                0</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> <span style="text-decoration: underline;">104</span>120          141 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">858</span>933. 1.45<span style="color: #949494;">e</span>9     1      <span style="text-decoration: underline;">16</span>047 -1        2 <span style="color: #BB0000;">NA</span>                0</span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> <span style="text-decoration: underline;">104</span>131           97 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">855</span>802. 1.45<span style="color: #949494;">e</span>9     1      <span style="text-decoration: underline;">16</span>047 2         4 <span style="color: #BB0000;">NA</span>                1</span>
<span class="co">## <span style="color: #BCBCBC;">10</span> <span style="text-decoration: underline;">104</span>132           97 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">855</span>812. 1.45<span style="color: #949494;">e</span>9     1      <span style="text-decoration: underline;">16</span>047 3         5 <span style="color: #BB0000;">NA</span>                1</span>
<span class="co">## <span style="color: #949494;"># … with more rows</span></span></code></pre>
<p>To omit runs identified as dubious by <code>motusFilter</code> we can use an <code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">anti_join()</a></code> from the <code>dplyr</code> package.</p>
<p>First identify invalid runs with a <code>motusFilter</code> of 0</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">bad_runs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">tags</span>, <span class="st">"runs"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">motusFilter</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span></code></pre></div>
<p>Now use <code><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">anti_join()</a></code> to remove those runs from the <code>alltags</code> view</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">alltags_filtered</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">anti_join</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">tags</span>, <span class="st">"alltags"</span><span class="op">)</span>, <span class="va">bad_runs</span>, by <span class="op">=</span> <span class="st">"runID"</span><span class="op">)</span></code></pre></div>
<p>To double check we can filter for short runs in the original <code>alltags</code> view</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">tags</span>, <span class="st">"alltags"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">hitID</span>, <span class="va">runID</span>, <span class="va">batchID</span>, <span class="va">motusTagID</span>, <span class="va">runLen</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">runLen</span> <span class="op">&lt;=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># Source:   lazy query [?? x 5]</span></span>
<span class="co">## <span style="color: #949494;"># Database: sqlite 3.37.0</span></span>
<span class="co"><span style="color: #949494;">## #   [/home/runner/work/motus/motus/vignettes/articles/data/project-176.motus]</span></span>
<span class="co">##     hitID  runID batchID motusTagID runLen</span>
<span class="co">##     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span> <span style="text-decoration: underline;">516</span>095 <span style="text-decoration: underline;">104</span>118     141      <span style="text-decoration: underline;">16</span>047      3</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span> <span style="text-decoration: underline;">516</span>096 <span style="text-decoration: underline;">104</span>118     141      <span style="text-decoration: underline;">16</span>047      3</span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span> <span style="text-decoration: underline;">516</span>097 <span style="text-decoration: underline;">104</span>119     141      <span style="text-decoration: underline;">16</span>047      3</span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span> <span style="text-decoration: underline;">516</span>098 <span style="text-decoration: underline;">104</span>119     141      <span style="text-decoration: underline;">16</span>047      3</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span> <span style="text-decoration: underline;">516</span>099 <span style="text-decoration: underline;">104</span>118     141      <span style="text-decoration: underline;">16</span>047      3</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> <span style="text-decoration: underline;">516</span>100 <span style="text-decoration: underline;">104</span>119     141      <span style="text-decoration: underline;">16</span>047      3</span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> <span style="text-decoration: underline;">516</span>101 <span style="text-decoration: underline;">104</span>120     141      <span style="text-decoration: underline;">16</span>047      2</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> <span style="text-decoration: underline;">516</span>102 <span style="text-decoration: underline;">104</span>120     141      <span style="text-decoration: underline;">16</span>047      2</span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> <span style="text-decoration: underline;">516</span>132 <span style="text-decoration: underline;">104</span>133      97      <span style="text-decoration: underline;">16</span>047      2</span>
<span class="co">## <span style="color: #BCBCBC;">10</span> <span style="text-decoration: underline;">516</span>133 <span style="text-decoration: underline;">104</span>133      97      <span style="text-decoration: underline;">16</span>047      2</span>
<span class="co">## <span style="color: #949494;"># … with more rows</span></span></code></pre>
<p>And compare this to our newly created <code>alltags_filtered</code> table</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">alltags_filtered</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">hitID</span>, <span class="va">runID</span>, <span class="va">batchID</span>, <span class="va">motusTagID</span>, <span class="va">runLen</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">runLen</span> <span class="op">&lt;=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># Source:   lazy query [?? x 5]</span></span>
<span class="co">## <span style="color: #949494;"># Database: sqlite 3.37.0</span></span>
<span class="co"><span style="color: #949494;">## #   [/home/runner/work/motus/motus/vignettes/articles/data/project-176.motus]</span></span>
<span class="co">## <span style="color: #949494;"># … with 5 variables: hitID &lt;int&gt;, runID &lt;int&gt;, batchID &lt;int&gt;, motusTagID &lt;lgl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   runLen &lt;int&gt;</span></span></code></pre>
<p>No more short runs, good!</p>
</div>
<div class="section level3">
<h3 id="filterbyactivity">
<code>filterByActivity()</code><a class="anchor" aria-label="anchor" href="#filterbyactivity"></a>
</h3>
<p>The <code>motusFilter</code> is one method of determining false detections, but Motus users are encouraged to explore alternative filter parameters.</p>
<p>By default, <code><a href="../reference/filterByActivity.html">filterByActivity()</a></code> filters detections using the specific cutoffs defined above in <a href="#empirically-based-cutoffs">Empirically-based cutoffs</a>. However, users can fine-tune the filter by adjusting all these cutoffs.</p>
<p>To get the same results as our above example with <code>motusFilter</code>, we can use <code><a href="../reference/filterByActivity.html">filterByActivity()</a></code> with the default arguments and only return <code>good</code> runs.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">alltags_filtered2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filterByActivity.html">filterByActivity</a></span><span class="op">(</span><span class="va">tags</span>, return <span class="op">=</span> <span class="st">"good"</span><span class="op">)</span></code></pre></div>
<p><strong>Note</strong> that <code><a href="../reference/filterByActivity.html">filterByActivity()</a></code> requires the SQLite database connection (not a flat data frame).</p>
<p>If we compare hits, runs, and batches, we see that the two filtered data sets are identical (although this won’t always be the case<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;Not &lt;em&gt;quite&lt;/em&gt; the same because &lt;code&gt;motusFilter&lt;/code&gt; does include some manual filtering.&lt;/p&gt;"><sup>3</sup></a>).</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">test1</span> <span class="op">&lt;-</span> <span class="va">alltags_filtered</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">hitID</span>, <span class="va">runID</span>, <span class="va">batchID</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">test2</span> <span class="op">&lt;-</span> <span class="va">alltags_filtered2</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">hitID</span>, <span class="va">runID</span>, <span class="va">batchID</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu">waldo</span><span class="fu">::</span><span class="fu"><a href="https://waldo.r-lib.org/reference/compare.html" class="external-link">compare</a></span><span class="op">(</span><span class="va">test1</span>, <span class="va">test2</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #00BB00;">✔</span> No differences</span></code></pre>
<p>Alternatively we can change the default view used, so the <code><a href="../reference/filterByActivity.html">filterByActivity()</a></code> function uses the <code>alltagsGPS</code> view. <strong>However</strong>, on very large databases this could be slow.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">alltags_filterd3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filterByActivity.html">filterByActivity</a></span><span class="op">(</span><span class="va">tags</span>, return <span class="op">=</span> <span class="st">"all"</span>, view <span class="op">=</span> <span class="st">"alltagsGPS"</span><span class="op">)</span></code></pre></div>
<div class="section level4">
<h4 id="customizing-the-filterbyactivity">Customizing the <code>filterByActivity()</code><a class="anchor" aria-label="anchor" href="#customizing-the-filterbyactivity"></a>
</h4>
<p>The <code><a href="../reference/filterByActivity.html">filterByActivity()</a></code> function uses the <code>activity</code> table to identify potentially problematic runs. As above, you can return just the “true” positives (<code>return = "good"</code>), but you can also return just the “false” positives (<code>return = "bad"</code>) or all runs (<code>return = "all"</code>). If you return <code>all</code> runs, you will also get a new column, <code>probability</code>, which reflects either 0 (expected false positive) or 1 (expected true positive), similar to the <a href="#motusfilter"><code>motusFilter</code> column</a>.</p>
<p>For example, the following code adds a <code>probability</code> column to the sample project data.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">alltags_filtered4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filterByActivity.html">filterByActivity</a></span><span class="op">(</span><span class="va">tags</span>, return <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">hitID</span>, <span class="va">runID</span>, <span class="va">batchID</span>, <span class="va">motusTagID</span>, <span class="va">runLen</span>, <span class="va">probability</span><span class="op">)</span>

<span class="va">alltags_filtered4</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># Source:   lazy query [?? x 6]</span></span>
<span class="co">## <span style="color: #949494;"># Database: sqlite 3.37.0</span></span>
<span class="co"><span style="color: #949494;">## #   [/home/runner/work/motus/motus/vignettes/articles/data/project-176.motus]</span></span>
<span class="co">##     hitID runID batchID motusTagID runLen probability</span>
<span class="co">##     <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;"> 1</span>  <span style="text-decoration: underline;">45</span>107  <span style="text-decoration: underline;">8</span>886      53      <span style="text-decoration: underline;">16</span>047      5           1</span>
<span class="co">## <span style="color: #BCBCBC;"> 2</span>  <span style="text-decoration: underline;">45</span>108  <span style="text-decoration: underline;">8</span>886      53      <span style="text-decoration: underline;">16</span>047      5           1</span>
<span class="co">## <span style="color: #BCBCBC;"> 3</span>  <span style="text-decoration: underline;">45</span>109  <span style="text-decoration: underline;">8</span>886      53      <span style="text-decoration: underline;">16</span>047      5           1</span>
<span class="co">## <span style="color: #BCBCBC;"> 4</span>  <span style="text-decoration: underline;">45</span>110  <span style="text-decoration: underline;">8</span>886      53      <span style="text-decoration: underline;">16</span>047      5           1</span>
<span class="co">## <span style="color: #BCBCBC;"> 5</span>  <span style="text-decoration: underline;">45</span>111  <span style="text-decoration: underline;">8</span>886      53      <span style="text-decoration: underline;">16</span>047      5           1</span>
<span class="co">## <span style="color: #BCBCBC;"> 6</span> <span style="text-decoration: underline;">199</span>885 <span style="text-decoration: underline;">23</span>305      64      <span style="text-decoration: underline;">16</span>047     11           1</span>
<span class="co">## <span style="color: #BCBCBC;"> 7</span> <span style="text-decoration: underline;">199</span>886 <span style="text-decoration: underline;">23</span>305      64      <span style="text-decoration: underline;">16</span>047     11           1</span>
<span class="co">## <span style="color: #BCBCBC;"> 8</span> <span style="text-decoration: underline;">199</span>887 <span style="text-decoration: underline;">23</span>305      64      <span style="text-decoration: underline;">16</span>047     11           1</span>
<span class="co">## <span style="color: #BCBCBC;"> 9</span> <span style="text-decoration: underline;">199</span>888 <span style="text-decoration: underline;">23</span>305      64      <span style="text-decoration: underline;">16</span>047     11           1</span>
<span class="co">## <span style="color: #BCBCBC;">10</span> <span style="text-decoration: underline;">199</span>889 <span style="text-decoration: underline;">23</span>305      64      <span style="text-decoration: underline;">16</span>047     11           1</span>
<span class="co">## <span style="color: #949494;"># … with more rows</span></span></code></pre>
<p>You can adjust these parameters to be <strong>less strict</strong> (i.e., exclude fewer detections). For example, here we exclude all runs of length 2 or less (<code>minLen</code>), keep all runs of length 4 or more (<code>maxLen</code>), and will exclude any runs less than length 3 (2 &lt; run &lt; 4) from an hour which had more than 500 runs (<code>maxRuns</code>) and where at least 95% (<code>ratio</code>) of those runs have a run length of 2.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">relaxed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filterByActivity.html">filterByActivity</a></span><span class="op">(</span><span class="va">tags</span>, minLen <span class="op">=</span> <span class="fl">2</span>, maxLen <span class="op">=</span> <span class="fl">4</span>, 
                            maxRuns <span class="op">=</span> <span class="fl">500</span>, ratio <span class="op">=</span> <span class="fl">0.95</span>, 
                            return <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></code></pre></div>
<p>These parameters can also be <strong>more strict</strong> (i.e., exclude more detections). This next example excludes all runs of length 4 or less (<code>minLen</code>), keeps all runs of length 10 or more (<code>maxLen</code>), and will exclude any runs of length 5-9 (4 &lt; run &lt; 10) from hours which have more than 50 runs (<code>maxRuns</code>) and where at least 75% (<code>ratio</code>) of those runs have a run length of 2.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">strict</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filterByActivity.html">filterByActivity</a></span><span class="op">(</span><span class="va">tags</span>, minLen <span class="op">=</span> <span class="fl">4</span>, maxLen <span class="op">=</span> <span class="fl">10</span>, 
                           maxRuns <span class="op">=</span> <span class="fl">50</span>, ratio <span class="op">=</span> <span class="fl">0.75</span>, 
                           return <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span></code></pre></div>
<p>Note that the filters may exclude some true detections in the process. Therefore, we recommend that after a full analysis of your data, you return to these detections and examine them individually, to determine (usually contextually) if they can be considered valid.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="exploring-problematic-detections">Exploring problematic detections<a class="anchor" aria-label="anchor" href="#exploring-problematic-detections"></a>
</h2>
<p>You may also be interested more generally in exploring which data have only short run lengths. For example, the following code shows the maximum run length at all sites by month (for those runs which haven’t been removed by filtering).</p>
<p>Here we will collect and summarize by receiver and month maximum run lengths. We’ll convert <code>ts</code> to a datetime format with <code><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_datetime()</a></code> from the lubridate package and we’ll use the <code><a href="https://lubridate.tidyverse.org/reference/month.html" class="external-link">month()</a></code> function to pull out months.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">max_runlen</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">tags</span>, <span class="st">"alltags"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>ts <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_datetime</a></span><span class="op">(</span><span class="va">ts</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span>, <span class="co"># convert ts to POSIXct format</span>
         month <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/month.html" class="external-link">month</a></span><span class="op">(</span><span class="va">ts</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">recvDeployName</span>, <span class="va">month</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>max.rl <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">runLen</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## `summarise()` has grouped output by 'recvDeployName'. You can override using the `.groups` argument.</span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">max_runlen</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">recvDeployName</span>, y <span class="op">=</span> <span class="va">max.rl</span>, fill <span class="op">=</span> <span class="va">month</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="filtering_files/figure-html/unnamed-chunk-16-1.png" width="50%"></p>
<p>Alternatively, you can produce a list of sites where the maximum run length of detections was never greater than (say) 4, which may sometimes (but not always!) indicate they are simply false detections.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">max_runlen</span>, <span class="va">max.rl</span> <span class="op">&lt;</span> <span class="fl">5</span><span class="op">)</span>, 
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">recvDeployName</span>, y <span class="op">=</span> <span class="va">max.rl</span>, fill <span class="op">=</span> <span class="va">month</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span>position <span class="op">=</span> <span class="st">"dodge"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_c</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p><img src="filtering_files/figure-html/unnamed-chunk-17-1.png" width="50%"></p>
<p>It is impossible to go through every possible issue that you may encounter here. Users are strongly encouraged to explore their data fully, and make reasoned decisions on which detections are unlikely or indeterminate.</p>
</div>

  </main><aside class="col-md-3"><nav id="toc"><h2>Sur cette page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Développé par John Brzustowski, Denis Lepage, Birds Canada.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site créé avec <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
