<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="motus">
<title>Chapter 6 - Exploring detections data • motus</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Chapter 6 - Exploring detections data">
<meta property="og:description" content="motus">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">motus</a>

    <small class="nav-text text-light me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">5.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/motus.html">Get started</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/01-introduction.html">Chapter 1 - Introduction</a>
    <a class="dropdown-item" href="../articles/02-installing-packages.html">Chapter 2 - Installing packages</a>
    <a class="dropdown-item" href="../articles/03-accessing-data.html">Chapter 3 - Accessing detections data</a>
    <a class="dropdown-item" href="../articles/04-deployments.html">Chapter 4 - Tag and receiver deployments</a>
    <a class="dropdown-item" href="../articles/05-data-cleaning.html">Chapter 5 - Data Cleaning</a>
    <a class="dropdown-item" href="../articles/06-exploring-data.html">Chapter 6 - Exploring detections data</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/troubleshooting.html">Troubleshooting</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/motusWTS/motus/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../index.html">EN</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../fr/index.html">FR</a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="06-exploring-data_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Chapter 6 - Exploring detections data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/motusWTS/motus/blob/HEAD/vignettes/articles/06-exploring-data.Rmd" class="external-link"><code>vignettes/articles/06-exploring-data.Rmd</code></a></small>
      <div class="d-none name"><code>06-exploring-data.Rmd</code></div>
    </div>

    
    
<blockquote>
<p>In this chapter, we’ll finally start exploring our data by summarizing, plotting and mapping.</p>
</blockquote>
<p>Once you have clarified any possible ambiguous tags and removed false positives, you are ready to start analyzing your clean data set. This chapter will walk you through some simple procedures to start working with and visualizing the clean sample data set; you can modify these scripts to work with your own data. For a more in-depth R tutorial we strongly recommend working through <a href="http://r4ds.had.co.nz/" class="external-link">R for Data Science</a> by Garrett Grolemund and Hadley Wickham.</p>
<div class="section level2">
<h2 id="load-required-packages">Load required packages<a class="anchor" aria-label="anchor" href="#load-required-packages"></a>
</h2>
<p>Follow the instructions in <a href="02-installing-packages.html">Chapter 2</a> to install the following packages before loading, if you haven’t already done so.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/motusWTS/motus" class="external-link">motus</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lubridate.tidyverse.org" class="external-link">lubridate</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ropenscilabs/rnaturalearth" class="external-link">rnaturalearth</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dkahle/ggmap" class="external-link">ggmap</a></span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>TZ <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="load-data">Load data<a class="anchor" aria-label="anchor" href="#load-data"></a>
</h2>
<p>If you followed along with the the previous Chapter (<a href="05-data-cleaning.html">Chapter 5 - Data cleaning</a>) and are working with the cleaned <code>df.alltags.sub</code> file, you can skip this step and go directly to <a href="#summarizing-your-data">Summarizing your data</a>.</p>
<p>Otherwise, if you saved your data as an RDS file, you can load it using:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df.alltags.sub</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span><span class="st">"./data/dfAlltagsSub.rds"</span><span class="op">)</span> <span class="co"># change dir to local directory</span></code></pre></div>
<p>Or, if you’ve applied a custom filter to your <code>.motus</code> file, you can load the previously downloaded sample Motus data (see <a href="03-accessing-data.html">Chapter 3</a>) and clean it now. Currently the main benefit of using the custom filter is that you apply the filter to the <code>.motus</code> file, which allows you more flexibility in applying <code>dplyr</code> functions to manage and filter the data (e.g., you can select different variables to include in the data than we included in the RDS file in <a href="05-data-cleaning.html">Chapter 5 - Data cleaning</a>). This approach also allows you to more readily integrate new data added to your database with the <code><a href="../reference/tagme.html">tagme()</a></code> function. Because we are selecting the same variables and filtering the same records, the following gives you the same dataset as the <code><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS()</a></code> statement above:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># load the .motus file (remember 'motus.sample' is both username and password)</span>
<span class="va">sql.motus</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/tagme.html">tagme</a></span><span class="op">(</span><span class="fl">176</span>, update <span class="op">=</span> <span class="cn">TRUE</span>, dir <span class="op">=</span> <span class="st">"./data/"</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Checking for new data in project 176</span></code></pre>
<pre><code><span class="co">## Updating metadata</span></code></pre>
<pre><code><span class="co">## activity:     1 new batch records to check</span></code></pre>
<pre><code><span class="co">## batchID  1977125 (#     1 of      1): got    156 activity records</span></code></pre>
<pre><code><span class="co">## batchID  1977125 (#     1 of      1): got      0 activity records</span></code></pre>
<pre><code><span class="co">## Downloaded 156 activity records</span></code></pre>
<pre><code><span class="co">## nodeData:     0 new batch records to check</span></code></pre>
<pre><code><span class="co">## Fetching deprecated batches</span></code></pre>
<pre><code><span class="co">## Total deprecated batches: 6</span>
<span class="co">## New deprecated batches: 0</span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tbl.alltags</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">sql.motus</span>, <span class="st">"alltagsGPS"</span><span class="op">)</span>

<span class="co"># obtain a table object of the filter</span>
<span class="va">tbl.filter</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/getRunsFilters.html">getRunsFilters</a></span><span class="op">(</span><span class="va">sql.motus</span>, <span class="st">"filtAmbigFalsePos"</span><span class="op">)</span>

<span class="co"># filter and convert the table into a dataframe, with a few modications</span>
<span class="va">df.alltags.sub</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">tbl.alltags</span>, <span class="va">tbl.filter</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"runID"</span>, <span class="st">"motusTagID"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>probability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">probability</span><span class="op">)</span>, <span class="fl">1</span>, <span class="va">probability</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">probability</span> <span class="op">&gt;</span> <span class="fl">0</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">noise</span>, <span class="op">-</span><span class="va">slop</span>, <span class="op">-</span><span class="va">burstSlop</span>, <span class="op">-</span><span class="va">done</span>, <span class="op">-</span><span class="va">bootnum</span>, <span class="op">-</span><span class="va">codeSet</span>, 
         <span class="op">-</span><span class="va">mfg</span>, <span class="op">-</span><span class="va">nomFreq</span>, <span class="op">-</span><span class="va">markerNumber</span>, <span class="op">-</span><span class="va">markerType</span>, <span class="op">-</span><span class="va">tagDepComments</span>, 
         <span class="op">-</span><span class="va">fullID</span>, <span class="op">-</span><span class="va">deviceID</span>, <span class="op">-</span><span class="va">recvDeployAlt</span>, 
         <span class="op">-</span><span class="va">speciesGroup</span>, <span class="op">-</span><span class="va">gpsLat</span>, <span class="op">-</span><span class="va">gpsLon</span>, <span class="op">-</span><span class="va">recvSiteName</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>time <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_datetime</a></span><span class="op">(</span><span class="va">ts</span><span class="op">)</span>,  <span class="co"># work with times AFTER transforming to flat file</span>
         tagDeployStart <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_datetime</a></span><span class="op">(</span><span class="va">tagDeployStart</span><span class="op">)</span>,
         tagDeployEnd <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_datetime</a></span><span class="op">(</span><span class="va">tagDeployEnd</span><span class="op">)</span>,
         recvDeployName <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">recvDeployName</span><span class="op">)</span>, 
                                  <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">recvDeployLat</span>, <span class="va">recvDeployLon</span>, sep<span class="op">=</span><span class="st">":"</span><span class="op">)</span>, 
                                  <span class="va">recvDeployName</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p><strong>Note that if your project is very large, you may want to convert only a portion of it to the dataframe, to avoid memory issues.</strong></p>
<p>Details on filtering the <code>tbl</code> prior to collecting as a dataframe are available in <a href="03-accessing-data.html#converting-to-flat-data">Converting to flat data in Chapter 3</a>.</p>
<p>Here we do so by adding a filter to the above command, in this case, only creating a dataframe for <code>motusTagID</code> 16047, but you can decide how to best subset your data based on your need (e.g. by species or year):</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># create a subset for a single tag, to keep the dataframe small</span>
<span class="va">df.alltags.16047</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">df.alltags.sub</span>, <span class="va">motusTagID</span> <span class="op">==</span> <span class="fl">16047</span><span class="op">)</span> </code></pre></div>
</div>
<div class="section level2">
<h2 id="summarizing-your-data">Summarizing your data<a class="anchor" aria-label="anchor" href="#summarizing-your-data"></a>
</h2>
<p>Here we will run through some basic commands, starting with the <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> function to view a selection of variables in a data frame:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sql.motus</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="st">"alltags"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">ts</span>, <span class="va">motusTagID</span>, <span class="va">runLen</span>, <span class="va">speciesEN</span>, <span class="va">tagDepLat</span>, <span class="va">tagDepLon</span>, 
         <span class="va">recvDeployLat</span>, <span class="va">recvDeployLon</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>time <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_datetime</a></span><span class="op">(</span><span class="va">ts</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##        ts              motusTagID        runLen        speciesEN        </span>
<span class="co">##  Min.   :1.438e+09   Min.   :-1953   Min.   :   2.0   Length:188354     </span>
<span class="co">##  1st Qu.:1.477e+09   1st Qu.:22758   1st Qu.:   2.0   Class :character  </span>
<span class="co">##  Median :1.477e+09   Median :22897   Median :  12.0   Mode  :character  </span>
<span class="co">##  Mean   :1.482e+09   Mean   :22604   Mean   : 206.5                     </span>
<span class="co">##  3rd Qu.:1.489e+09   3rd Qu.:22905   3rd Qu.: 153.0                     </span>
<span class="co">##  Max.   :1.498e+09   Max.   :24303   Max.   :2474.0                     </span>
<span class="co">##                                                                         </span>
<span class="co">##    tagDepLat       tagDepLon      recvDeployLat    recvDeployLon    </span>
<span class="co">##  Min.   :11.12   Min.   :-80.69   Min.   :-42.50   Min.   :-143.68  </span>
<span class="co">##  1st Qu.:50.19   1st Qu.:-63.75   1st Qu.:-42.50   1st Qu.: -73.88  </span>
<span class="co">##  Median :50.19   Median :-63.75   Median : 50.19   Median : -63.91  </span>
<span class="co">##  Mean   :50.15   Mean   :-65.86   Mean   : 10.36   Mean   : -69.12  </span>
<span class="co">##  3rd Qu.:50.19   3rd Qu.:-63.75   3rd Qu.: 50.20   3rd Qu.: -63.75  </span>
<span class="co">##  Max.   :51.80   Max.   :-63.75   Max.   : 62.89   Max.   : -60.02  </span>
<span class="co">##  NA's   :80949   NA's   :80949    NA's   :173      NA's   :173      </span>
<span class="co">##       time                    </span>
<span class="co">##  Min.   :2015-07-23 10:10:54  </span>
<span class="co">##  1st Qu.:2016-10-19 02:00:53  </span>
<span class="co">##  Median :2016-10-26 13:19:24  </span>
<span class="co">##  Mean   :2016-12-15 03:37:44  </span>
<span class="co">##  3rd Qu.:2017-03-14 08:46:57  </span>
<span class="co">##  Max.   :2017-06-26 16:11:04  </span>
<span class="co">## </span></code></pre>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># same summary for the filtered sql data</span>
<span class="va">df.alltags.sub</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">time</span>, <span class="va">motusTagID</span>, <span class="va">runLen</span>, <span class="va">speciesEN</span>, <span class="va">tagDepLat</span>, <span class="va">tagDepLon</span>, 
         <span class="va">recvDeployLat</span>, <span class="va">recvDeployLon</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##       time                       motusTagID        runLen      </span>
<span class="co">##  Min.   :2015-08-03 06:37:11   Min.   :-1953   Min.   :   4.0  </span>
<span class="co">##  1st Qu.:2016-10-06 19:18:39   1st Qu.:22897   1st Qu.:  27.0  </span>
<span class="co">##  Median :2016-10-09 21:50:50   Median :22897   Median :  97.0  </span>
<span class="co">##  Mean   :2016-09-05 19:18:32   Mean   :22262   Mean   : 234.7  </span>
<span class="co">##  3rd Qu.:2016-10-19 10:42:18   3rd Qu.:22897   3rd Qu.: 287.0  </span>
<span class="co">##  Max.   :2017-04-20 22:33:19   Max.   :23316   Max.   :1371.0  </span>
<span class="co">##                                                                </span>
<span class="co">##   speciesEN           tagDepLat       tagDepLon      recvDeployLat   </span>
<span class="co">##  Length:48225       Min.   :50.19   Min.   :-80.69   Min.   :-42.50  </span>
<span class="co">##  Class :character   1st Qu.:50.19   1st Qu.:-63.75   1st Qu.: 50.20  </span>
<span class="co">##  Mode  :character   Median :50.19   Median :-63.75   Median : 50.20  </span>
<span class="co">##                     Mean   :50.34   Mean   :-65.56   Mean   : 49.87  </span>
<span class="co">##                     3rd Qu.:50.19   3rd Qu.:-63.75   3rd Qu.: 50.20  </span>
<span class="co">##                     Max.   :51.80   Max.   :-63.75   Max.   : 51.82  </span>
<span class="co">##                     NA's   :92      NA's   :92       NA's   :164     </span>
<span class="co">##  recvDeployLon   </span>
<span class="co">##  Min.   :-80.69  </span>
<span class="co">##  1st Qu.:-63.75  </span>
<span class="co">##  Median :-63.75  </span>
<span class="co">##  Mean   :-65.28  </span>
<span class="co">##  3rd Qu.:-63.75  </span>
<span class="co">##  Max.   :-62.99  </span>
<span class="co">##  NA's   :164</span></code></pre>
<p>The <code>dplyr</code> package allows you to easily summarize data by group, manipulate variables, or create new variables based on your data.</p>
<p>We can manipulate existing variables or create new ones with <code>dplyr</code>’s <code><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate()</a></code> function, here we’ll convert <code>ts</code> to a date/time format, then make a new variable for year and day of year (<code>doy</code>).</p>
<p>We’ll also remove the set of points with missing receiver latitude and longitudes. These may be useful in some contexts (for example if the approximate location of the receiver is known) but can cause warnings or errors when plotting.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df.alltags.sub</span> <span class="op">&lt;-</span> <span class="va">df.alltags.sub</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span>, <span class="co"># extract year from time</span>
         doy <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/day.html" class="external-link">yday</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># extract numeric day of year from time</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">recvDeployLat</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">df.alltags.sub</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 6 × 52</span></span>
<span class="co">##     hitID runID batchID       ts tsCorrected   sig sigsd  freq freqsd motusTagID</span>
<span class="co">##   <span style="color: #949494; font-style: italic;">&lt;int64&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;"> 45</span>107  <span style="text-decoration: underline;">8</span>886      53   1.45<span style="color: #949494;">e</span>9 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">858</span>390.    52     0     4      0      <span style="text-decoration: underline;">16</span>047</span>
<span class="co">## <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;"> 45</span>108  <span style="text-decoration: underline;">8</span>886      53   1.45<span style="color: #949494;">e</span>9 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">858</span>429.    54     0     4      0      <span style="text-decoration: underline;">16</span>047</span>
<span class="co">## <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;"> 45</span>109  <span style="text-decoration: underline;">8</span>886      53   1.45<span style="color: #949494;">e</span>9 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">858</span>477.    55     0     4      0      <span style="text-decoration: underline;">16</span>047</span>
<span class="co">## <span style="color: #BCBCBC;">4</span>  <span style="text-decoration: underline;"> 45</span>110  <span style="text-decoration: underline;">8</span>886      53   1.45<span style="color: #949494;">e</span>9 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">858</span>516.    52     0     4      0      <span style="text-decoration: underline;">16</span>047</span>
<span class="co">## <span style="color: #BCBCBC;">5</span>  <span style="text-decoration: underline;"> 45</span>111  <span style="text-decoration: underline;">8</span>886      53   1.45<span style="color: #949494;">e</span>9 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">858</span>564.    49     0     4      0      <span style="text-decoration: underline;">16</span>047</span>
<span class="co">## <span style="color: #BCBCBC;">6</span>  <span style="text-decoration: underline;">199</span>885 <span style="text-decoration: underline;">23</span>305      64   1.45<span style="color: #949494;">e</span>9 <span style="text-decoration: underline;">1</span>445<span style="text-decoration: underline;">857</span>924.    33     0     4      0      <span style="text-decoration: underline;">16</span>047</span>
<span class="co">## <span style="color: #949494;"># … with 42 more variables: ambigID &lt;int&gt;, port &lt;chr&gt;, nodeNum &lt;chr&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   runLen &lt;int&gt;, motusFilter &lt;dbl&gt;, tagProjID &lt;int&gt;, mfgID &lt;chr&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   tagType &lt;chr&gt;, tagModel &lt;chr&gt;, tagLifespan &lt;dbl&gt;, tagBI &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   pulseLen &lt;dbl&gt;, tagDeployID &lt;int&gt;, speciesID &lt;int&gt;, tagDeployStart &lt;dttm&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   tagDeployEnd &lt;dttm&gt;, tagDepLat &lt;dbl&gt;, tagDepLon &lt;dbl&gt;, tagDepAlt &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   tagDeployTest &lt;int&gt;, recvDeployID &lt;int&gt;, recvDeployLat &lt;dbl&gt;,</span></span>
<span class="co">## <span style="color: #949494;">#   recvDeployLon &lt;dbl&gt;, recv &lt;chr&gt;, recvDeployName &lt;chr&gt;, …</span></span></code></pre>
<p>We can also summarize information by group, in this case <code>motusTagID</code>, and apply various functions to these groups such as getting the total number of detections (<code>n</code>) for each tag, the number of receivers each tag was detected on, the first and last detection date, and the total number of days there was at least one detection:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tagSummary</span> <span class="op">&lt;-</span> <span class="va">df.alltags.sub</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">motusTagID</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>nDet <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,
            nRecv <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">recvDeployName</span><span class="op">)</span><span class="op">)</span>,
            timeMin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span>,
            timeMax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span>,
            totDay <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">doy</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tagSummary</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 6 × 6</span></span>
<span class="co">##   motusTagID  nDet nRecv timeMin             timeMax             totDay</span>
<span class="co">##        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="co">## <span style="color: #BCBCBC;">1</span>      -<span style="color: #BB0000; text-decoration: underline;">1</span><span style="color: #BB0000;">953</span>    10     1 2017-03-18 <span style="color: #949494;">06:21:12</span> 2017-03-25 <span style="color: #949494;">05:54:54</span>      2</span>
<span class="co">## <span style="color: #BCBCBC;">2</span>      <span style="text-decoration: underline;">16</span>011   116     1 2015-08-03 <span style="color: #949494;">06:37:11</span> 2015-08-05 <span style="color: #949494;">20:41:12</span>      3</span>
<span class="co">## <span style="color: #BCBCBC;">3</span>      <span style="text-decoration: underline;">16</span>035   415     5 2015-08-14 <span style="color: #949494;">17:53:49</span> 2015-09-02 <span style="color: #949494;">14:06:09</span>      6</span>
<span class="co">## <span style="color: #BCBCBC;">4</span>      <span style="text-decoration: underline;">16</span>036    62     1 2015-08-17 <span style="color: #949494;">21:56:44</span> 2015-08-17 <span style="color: #949494;">21:58:52</span>      1</span>
<span class="co">## <span style="color: #BCBCBC;">5</span>      <span style="text-decoration: underline;">16</span>037  <span style="text-decoration: underline;">1</span>278     3 2015-08-23 <span style="color: #949494;">15:13:57</span> 2015-09-08 <span style="color: #949494;">18:37:16</span>     14</span>
<span class="co">## <span style="color: #BCBCBC;">6</span>      <span style="text-decoration: underline;">16</span>038    70     1 2015-08-20 <span style="color: #949494;">18:42:33</span> 2015-08-22 <span style="color: #949494;">22:19:37</span>      3</span></code></pre>
<p>We can also group by multiple variables; applying the same function as above but now grouping by <code>motusTagID</code> and <code>recvDeployName</code>, we will get information for each tag detected on each receiver. Since we are grouping by <code>recvDeployName</code>, there will be by default only one <code>recvDeployName</code> in each group, thus the variable <code>nRecv</code> will be 1 for each row. This in not very informative, however we include this to help illustrate how grouping works:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tagRecvSummary</span> <span class="op">&lt;-</span> <span class="va">df.alltags.sub</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">motusTagID</span>, <span class="va">recvDeployName</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>nDet <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span>,
            nRecv <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">recvDeployName</span><span class="op">)</span><span class="op">)</span>,
            timeMin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span>,
            timeMax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span>,
            totDay <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">doy</span><span class="op">)</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">tagRecvSummary</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## <span style="color: #949494;"># A tibble: 6 × 7</span></span>
<span class="co">##   motusTagID recvDeployName  nDet nRecv timeMin             timeMax            </span>
<span class="co">##        <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;dttm&gt;</span>             </span>
<span class="co">## <span style="color: #BCBCBC;">1</span>      -<span style="color: #BB0000; text-decoration: underline;">1</span><span style="color: #BB0000;">953</span> LLICALDAD         10     1 2017-03-18 <span style="color: #949494;">06:21:12</span> 2017-03-25 <span style="color: #949494;">05:54:54</span></span>
<span class="co">## <span style="color: #BCBCBC;">2</span>      <span style="text-decoration: underline;">16</span>011 North Bluff      116     1 2015-08-03 <span style="color: #949494;">06:37:11</span> 2015-08-05 <span style="color: #949494;">20:41:12</span></span>
<span class="co">## <span style="color: #BCBCBC;">3</span>      <span style="text-decoration: underline;">16</span>035 Brier2            38     1 2015-09-02 <span style="color: #949494;">14:03:19</span> 2015-09-02 <span style="color: #949494;">14:06:09</span></span>
<span class="co">## <span style="color: #BCBCBC;">4</span>      <span style="text-decoration: underline;">16</span>035 D'Estimauville    32     1 2015-09-02 <span style="color: #949494;">07:58:43</span> 2015-09-02 <span style="color: #949494;">08:04:24</span></span>
<span class="co">## <span style="color: #BCBCBC;">5</span>      <span style="text-decoration: underline;">16</span>035 Netitishi        274     1 2015-08-14 <span style="color: #949494;">17:53:49</span> 2015-09-01 <span style="color: #949494;">21:35:32</span></span>
<span class="co">## <span style="color: #BCBCBC;">6</span>      <span style="text-decoration: underline;">16</span>035 Southwest Head    65     1 2015-09-02 <span style="color: #949494;">13:06:13</span> 2015-09-02 <span style="color: #949494;">13:14:39</span></span>
<span class="co">## <span style="color: #949494;"># … with 1 more variable: totDay &lt;int&gt;</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="plotting-your-data">Plotting your data<a class="anchor" aria-label="anchor" href="#plotting-your-data"></a>
</h2>
<p>Plotting your data is a powerful way to visualize broad and fine-scale detection patterns. This section will give you a brief introduction to plotting using <code>ggplot2</code>. For more in depth information on the uses of <code>ggplot2</code>, we recommend the <a href="http://www.cookbook-r.com/Graphs/" class="external-link">Cookbook for R</a>, and the Rstudio <a href="https://www.rstudio.com/wp-content/uploads/2015/03/ggplot2-cheatsheet.pdf" class="external-link"><code>ggplot2</code> cheatsheet</a>.</p>
<p>To make coarse-scale plots with large files, we suggest first rounding the detection time to the nearest hour or day so that processing time is faster. Here we round detection times to the nearest hour, then make a basic plot of hourly detections by <code>motusTagID</code>:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df.alltags.sub.2</span> <span class="op">&lt;-</span> <span class="va">df.alltags.sub</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>hour <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/hour.html" class="external-link">hour</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">motusTagID</span>, <span class="va">port</span>, <span class="va">tagDeployStart</span>, <span class="va">tagDepLat</span>, <span class="va">tagDepLon</span>, 
         <span class="va">recvDeployLat</span>, <span class="va">recvDeployLon</span>, <span class="va">recvDeployName</span>, <span class="va">antBearing</span>, <span class="va">speciesEN</span>, <span class="va">year</span>, <span class="va">doy</span>, <span class="va">hour</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df.alltags.sub.2</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">motusTagID</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Hour"</span>, y <span class="op">=</span> <span class="st">"MotusTagID"</span><span class="op">)</span></code></pre></div>
<p><img src="06-exploring-data_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>Let’s focus only on tags deployed in 2016, and we can colour the tags by species:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">df.alltags.sub.2</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="va">tagDeployStart</span><span class="op">)</span> <span class="op">==</span> <span class="fl">2016</span><span class="op">)</span>, 
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">motusTagID</span><span class="op">)</span>, colour <span class="op">=</span> <span class="va">speciesEN</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Hour"</span>, y <span class="op">=</span> <span class="st">"MotusTagID"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html" class="external-link">scale_colour_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Species"</span><span class="op">)</span></code></pre></div>
<p><img src="06-exploring-data_files/figure-html/unnamed-chunk-10-1.png" width="700"></p>
<p>We can see how tags moved latitudinally by first ordering by hour, and colouring by <code>motusTagID</code>:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df.alltags.sub.2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">df.alltags.sub.2</span>, <span class="va">hour</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">df.alltags.sub.2</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="va">tagDeployStart</span><span class="op">)</span> <span class="op">==</span> <span class="fl">2016</span><span class="op">)</span>, 
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">hour</span>, y <span class="op">=</span> <span class="va">recvDeployLat</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">motusTagID</span><span class="op">)</span>, 
           group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">motusTagID</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_path</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Hour"</span>, y <span class="op">=</span> <span class="st">"Receiver latitude"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html" class="external-link">scale_colour_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"MotusTagID"</span><span class="op">)</span></code></pre></div>
<p><img src="06-exploring-data_files/figure-html/unnamed-chunk-11-1.png" width="700"></p>
<p>Now let’s look at more detailed plots of signal variation. We use the full <code>df.alltags.sub</code> dataframe so that we can get signal strength for each detection of a specific tag. Let’s examine fall 2016 detections of tag 22897 at Niapiskau; we facet the plot by deployment name, ordered by decreasing latitude:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">df.alltags.sub</span>, 
                     <span class="va">motusTagID</span> <span class="op">==</span> <span class="fl">22897</span>, 
                     <span class="va">recvDeployName</span> <span class="op">==</span> <span class="st">"Niapiskau"</span><span class="op">)</span>, 
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">sig</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Time"</span>, y <span class="op">=</span> <span class="st">"Signal strength"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">recvDeployName</span> <span class="op">~</span> <span class="va">.</span><span class="op">)</span></code></pre></div>
<p><img src="06-exploring-data_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p>We use the <code><a href="../reference/sunRiseSet.html">sunRiseSet()</a></code> to get sunrise and sunset times for all detections. We then zoom in on a certain timeframe and add that information to the above plot by adding a <code><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline()</a></code> statement to the code, which adds a yellow line for sunrise time, and a blue line for sunset time:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># add sunrise and sunset times to the dataframe</span>
<span class="va">df.alltags.sub</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/sunRiseSet.html">sunRiseSet</a></span><span class="op">(</span><span class="va">df.alltags.sub</span>, lat <span class="op">=</span> <span class="st">"recvDeployLat"</span>, lon <span class="op">=</span> <span class="st">"recvDeployLon"</span><span class="op">)</span> 

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">df.alltags.sub</span>, <span class="va">motusTagID</span> <span class="op">==</span> <span class="fl">22897</span>,
                     <span class="va">time</span> <span class="op">&gt;</span> <span class="st">"2016-10-11"</span>,
                     <span class="va">time</span> <span class="op">&lt;</span> <span class="st">"2016-10-17"</span>,
                     <span class="va">recvDeployName</span> <span class="op">==</span> <span class="st">"Niapiskau"</span><span class="op">)</span>, 
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">sig</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Time of year"</span>, y <span class="op">=</span> <span class="st">"Signal strength"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">sunrise</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"orange"</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_vline</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>xintercept <span class="op">=</span> <span class="va">sunset</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">"blue"</span><span class="op">)</span></code></pre></div>
<p><img src="06-exploring-data_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<p>We can see that during this period, the tag was most often detected during the day, suggesting it may be actively foraging in this area during this time.</p>
<p>The same plots can provide valuable movement information when the receivers are ordered geographically. We do this for <code>motusTagID</code> 16039:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># We'll first order sitelat by latitude (for plots)</span>
<span class="va">df.alltags.sub</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="va">df.alltags.sub</span>, 
                         recvDeployName <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">recvDeployName</span>, <span class="va">recvDeployLat</span><span class="op">)</span><span class="op">)</span>

<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">df.alltags.sub</span>, 
                     <span class="va">motusTagID</span> <span class="op">==</span> <span class="fl">16039</span>,
                     <span class="va">time</span> <span class="op">&lt;</span> <span class="st">"2015-10-01"</span><span class="op">)</span>, 
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">recvDeployName</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Time of year"</span>, y <span class="op">=</span> <span class="st">"Receiver name (ordered by latitude)"</span><span class="op">)</span></code></pre></div>
<p><img src="06-exploring-data_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<p>We zoom in on a section of this plot and look at antenna bearings to see directional movement past stations:</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">df.alltags.sub</span>, <span class="va">motusTagID</span> <span class="op">==</span> <span class="fl">16039</span>, 
                     <span class="va">time</span> <span class="op">&gt;</span> <span class="st">"2015-09-14"</span>, 
                     <span class="va">time</span> <span class="op">&lt;</span> <span class="st">"2015-10-01"</span><span class="op">)</span>, 
       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">time</span>, y <span class="op">=</span> <span class="va">sig</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">antBearing</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Time of day"</span>, y <span class="op">=</span> <span class="st">"Signal strength"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html" class="external-link">scale_color_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Antenna bearing"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">recvDeployName</span> <span class="op">~</span> <span class="va">.</span><span class="op">)</span></code></pre></div>
<p><img src="06-exploring-data_files/figure-html/unnamed-chunk-15-1.png" width="700"></p>
<p>This plot shows the typical fly-by pattern of a migrating animal, with signal strength increasing and then decreasing as the tag moves through the beams of the antennas.</p>
</div>
<div class="section level2">
<h2 id="mapping-your-data">Mapping your data<a class="anchor" aria-label="anchor" href="#mapping-your-data"></a>
</h2>
<p>To generate maps of tag paths, we will once again use summarized data so we can work with a much smaller database for faster processing. Here we’ll summarize detections by day. We will use code similar to the code we used in <a href="05-data-cleaning.html">Chapter 5 - Data cleaning</a>, however, here we will create a simple function to summarize the data, since we will likely want to do this type of summary over and over again.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Simplify the data by summarizing by the runID</span>
<span class="co"># If you want to summarize at a finer (or coarser) scale, you can also create</span>
<span class="co"># other groups.</span>

<span class="va">fun.getpath</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">df</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">tagProjID</span> <span class="op">==</span> <span class="fl">176</span>, <span class="co"># keep only tags registered to the sample project</span>
           <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">recvDeployLat</span><span class="op">)</span> <span class="op">|</span> <span class="op">!</span><span class="op">(</span><span class="va">recvDeployLat</span> <span class="op">==</span> <span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">motusTagID</span>, <span class="va">runID</span>, <span class="va">recvDeployName</span>, <span class="va">ambigID</span>, 
             <span class="va">tagDepLon</span>, <span class="va">tagDepLat</span>, <span class="va">recvDeployLat</span>, <span class="va">recvDeployLon</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>max.runLen <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">runLen</span><span class="op">)</span>, time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span>, .groups <span class="op">=</span> <span class="st">"drop"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">motusTagID</span>, <span class="va">time</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="op">)</span>
<span class="op">}</span> <span class="co"># end of function call</span>

<span class="va">df.alltags.path</span> <span class="op">&lt;-</span> <span class="fu">fun.getpath</span><span class="op">(</span><span class="va">df.alltags.sub</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">df.alltags.sub.path</span> <span class="op">&lt;-</span> <span class="va">df.alltags.sub</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">tagProjID</span> <span class="op">==</span> <span class="fl">176</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># only tags registered to project</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">motusTagID</span>, <span class="va">time</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>       <span class="co"># order by time stamp for each tag</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>date <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_date</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>    <span class="co"># create date variable</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">motusTagID</span>, <span class="va">date</span>, <span class="va">recvDeployName</span>, <span class="va">ambigID</span>, 
           <span class="va">tagDepLon</span>, <span class="va">tagDepLat</span>, <span class="va">recvDeployLat</span>, <span class="va">recvDeployLon</span><span class="op">)</span>

<span class="va">df.alltags.path</span> <span class="op">&lt;-</span> <span class="fu">fun.getpath</span><span class="op">(</span><span class="va">df.alltags.sub.path</span><span class="op">)</span></code></pre></div>
<div class="section level3">
<h3 id="creating-simple-maps-with-the-sf-package">Creating simple maps with the <code>sf</code> package<a class="anchor" aria-label="anchor" href="#creating-simple-maps-with-the-sf-package"></a>
</h3>
<p>Mapping allows us to spatially view our data and connect sequential detections that may represent flight paths in some cases. First we load base maps from the <code>rnaturalearth</code> package. Please see <a href="04-deployments.html#location-of-tag-deployments">Chapter 4</a> for more detail if you have not already downloaded the <code>rnaturalearth</code> shapefiles.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">world</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rnaturalearth/man/ne_countries.html" class="external-link">ne_countries</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="st">"medium"</span>, returnclass <span class="op">=</span> <span class="st">"sf"</span><span class="op">)</span> 
<span class="va">lakes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/rnaturalearth/man/ne_load.html" class="external-link">ne_load</a></span><span class="op">(</span>type <span class="op">=</span> <span class="st">"lakes"</span>, scale <span class="op">=</span> <span class="st">"medium"</span>, category <span class="op">=</span> <span class="st">'physical'</span>,
                 returnclass <span class="op">=</span> <span class="st">"sf"</span>,
                 destdir <span class="op">=</span> <span class="st">"map-data"</span><span class="op">)</span> <span class="co"># use this if already downloaded shapefiles</span></code></pre></div>
<pre><code><span class="co">## OGR data source with driver: ESRI Shapefile </span>
<span class="co">## Source: "/home/runner/work/motus/motus/vignettes/articles/map-data", layer: "ne_50m_lakes"</span>
<span class="co">## with 412 features</span>
<span class="co">## It has 39 fields</span>
<span class="co">## Integer64 fields read as strings:  scalerank ne_id</span></code></pre>
<p>Then, to map the paths, we set the x-axis and y-axis limits based on the location of receivers with detections. Depending on your data, these might need to be modified to encompass the deployment location of the tags, if tags were not deployed near towers with detections. We then use <code>ggplot</code> and <code>sf</code> to plot the map and tag paths. We add points for receivers and lines connecting consecutive detections by <code>motusTagID</code>. We also include an ‘x’ for where tags were deployed.</p>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># just use the tags that we have examined carefully and filtered (in the</span>
<span class="co"># previous chapter)</span>
<span class="va">df.tmp</span> <span class="op">&lt;-</span> <span class="va">df.alltags.path</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">motusTagID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">16011</span>, <span class="fl">16035</span>, <span class="fl">16036</span>, <span class="fl">16037</span>, <span class="fl">16038</span>, <span class="fl">16039</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span>  <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># arrange by hour</span>
  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span>

<span class="co"># set limits to map based on locations of detections, ensuring they include the</span>
<span class="co"># deployment locations</span>
<span class="va">xmin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">df.tmp</span><span class="op">$</span><span class="va">recvDeployLon</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-</span> <span class="fl">2</span>
<span class="va">xmax</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">df.tmp</span><span class="op">$</span><span class="va">recvDeployLon</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> <span class="fl">2</span>
<span class="va">ymin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">df.tmp</span><span class="op">$</span><span class="va">recvDeployLat</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span>
<span class="va">ymax</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">df.tmp</span><span class="op">$</span><span class="va">recvDeployLat</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">+</span> <span class="fl">1</span>

<span class="co"># map</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">world</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">lakes</span>, colour <span class="op">=</span> <span class="cn">NA</span>, fill <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">xmin</span>, <span class="va">xmax</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">ymin</span>, <span class="va">ymax</span><span class="op">)</span>, expand <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_path</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df.tmp</span>, 
            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">recvDeployLon</span>, y <span class="op">=</span> <span class="va">recvDeployLat</span>, 
                group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">motusTagID</span><span class="op">)</span>, colour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">motusTagID</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df.tmp</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">recvDeployLon</span>, y <span class="op">=</span> <span class="va">recvDeployLat</span><span class="op">)</span>, 
             shape <span class="op">=</span> <span class="fl">16</span>, colour <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df.tmp</span>, 
             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">tagDepLon</span>, y <span class="op">=</span> <span class="va">tagDepLat</span><span class="op">)</span>, colour <span class="op">=</span> <span class="st">"red"</span>, shape <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html" class="external-link">scale_colour_discrete</a></span><span class="op">(</span><span class="st">"motusTagID"</span><span class="op">)</span> </code></pre></div>
<p><img src="06-exploring-data_files/figure-html/unnamed-chunk-19-1.png" width="700"> We can also add points for all receivers that were active, but did not detect these birds during a certain time period if we have already downloaded all metadata.</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># get receiver metadata</span>
<span class="va">tbl.recvDeps</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">sql.motus</span>, <span class="st">"recvDeps"</span><span class="op">)</span>
<span class="va">df.recvDeps</span> <span class="op">&lt;-</span> <span class="va">tbl.recvDeps</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>timeStart <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_datetime</a></span><span class="op">(</span><span class="va">tsStart</span><span class="op">)</span>,
         timeEnd <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_datetime</a></span><span class="op">(</span><span class="va">tsEnd</span><span class="op">)</span>,
         <span class="co"># for deployments with no end dates, make an end date a year from now</span>
         timeEnd <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/if_else.html" class="external-link">if_else</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">timeEnd</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/period.html" class="external-link">years</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, <span class="va">timeEnd</span><span class="op">)</span><span class="op">)</span>

<span class="co"># get running intervals for all receiver deployments</span>
<span class="va">siteOp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">df.recvDeps</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/interval.html" class="external-link">interval</a></span><span class="op">(</span><span class="va">timeStart</span>, <span class="va">timeEnd</span><span class="op">)</span><span class="op">)</span>

<span class="co"># set the date range you're interested in</span>
<span class="va">dateRange</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/interval.html" class="external-link">interval</a></span><span class="op">(</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_date</a></span><span class="op">(</span><span class="st">"2015-08-01"</span><span class="op">)</span>, <span class="fu"><a href="https://lubridate.tidyverse.org/reference/as_date.html" class="external-link">as_date</a></span><span class="op">(</span><span class="st">"2016-01-01"</span><span class="op">)</span><span class="op">)</span>

<span class="co"># create new variable "active" which will be set to TRUE if the receiver was</span>
<span class="co"># active at some point during your specified date range, and FALSE if not</span>
<span class="va">df.recvDeps</span><span class="op">$</span><span class="va">active</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/interval.html" class="external-link">int_overlaps</a></span><span class="op">(</span><span class="va">siteOp</span>, <span class="va">dateRange</span><span class="op">)</span> 

<span class="co"># create map with receivers active during specified date range as red, and</span>
<span class="co"># receivers with detections as yellow</span>
<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">world</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">lakes</span>, colour <span class="op">=</span> <span class="cn">NA</span>, fill <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">coord_sf</a></span><span class="op">(</span>xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">xmin</span>, <span class="va">xmax</span><span class="op">)</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">ymin</span>, <span class="va">ymax</span><span class="op">)</span>, expand <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">""</span>, y <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">df.recvDeps</span>, <span class="va">active</span> <span class="op">==</span> <span class="cn">TRUE</span><span class="op">)</span>, 
             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">longitude</span>, y <span class="op">=</span> <span class="va">latitude</span><span class="op">)</span>, 
             shape <span class="op">=</span> <span class="fl">16</span>, colour <span class="op">=</span> <span class="st">"grey60"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_path</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df.tmp</span>, 
            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">recvDeployLon</span>, y <span class="op">=</span> <span class="va">recvDeployLat</span>, 
                group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">motusTagID</span><span class="op">)</span>, colour <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">motusTagID</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df.tmp</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">recvDeployLon</span>, y <span class="op">=</span> <span class="va">recvDeployLat</span><span class="op">)</span>, 
             shape <span class="op">=</span> <span class="fl">16</span>, colour <span class="op">=</span> <span class="st">"black"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df.tmp</span>, 
             <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">tagDepLon</span>, y <span class="op">=</span> <span class="va">tagDepLat</span><span class="op">)</span>, colour <span class="op">=</span> <span class="st">"red"</span>, shape <span class="op">=</span> <span class="fl">4</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html" class="external-link">scale_colour_discrete</a></span><span class="op">(</span><span class="st">"motusTagID"</span><span class="op">)</span> </code></pre></div>
<p><img src="06-exploring-data_files/figure-html/unnamed-chunk-20-1.png" width="960"></p>
</div>
<div class="section level3">
<h3 id="mapping-with-the-ggmap-package">Mapping with the <code>ggmap</code> package<a class="anchor" aria-label="anchor" href="#mapping-with-the-ggmap-package"></a>
</h3>
<p>Mapping with <code>ggmap</code> allows you to select from multiple base layers.<br>
There are several ways to use the <code>ggmap</code> package. One is with Google Maps, which, as of October 16, 2018, requires a Google Maps API key (see <a href="troubleshooting.html#google-maps">Troubleshooting</a> for more details). An alternative method is to use an open source of map tiles, such as Stamen Map tiles, which do not require an API key. The following example uses Stamen Map tiles.</p>
<p>The first step is to create a map with a specified map are, maptype (“terrain”, “toner”, or “watercolor”, among others), and level of zoom (integer for zoom 3-21, 3 being continent level, 10 being city-scale. For stamen maps this represents the level of detail you want). We then add points for receivers and lines connecting consecutive detections by <code>motusTagID.</code></p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">gmap</span> <span class="op">&lt;-</span>  <span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/get_stamenmap.html" class="external-link">get_stamenmap</a></span><span class="op">(</span>bbox <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>left <span class="op">=</span> <span class="op">-</span><span class="fl">90</span>, right <span class="op">=</span> <span class="op">-</span><span class="fl">57</span>, bottom <span class="op">=</span> <span class="fl">35</span>, top <span class="op">=</span> <span class="fl">55</span><span class="op">)</span>,
                       maptype <span class="op">=</span> <span class="st">"terrain-background"</span>, <span class="co"># select maptype</span>
                       zoom <span class="op">=</span> <span class="fl">6</span><span class="op">)</span> <span class="co"># zoom, must be a whole number</span>

<span class="co"># just use the tags that we have examined carefully and filtered (in the</span>
<span class="co"># previous chapter)</span>
<span class="va">df.tmp</span> <span class="op">&lt;-</span> <span class="va">df.alltags.path</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">motusTagID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">16011</span>, <span class="fl">16035</span>, <span class="fl">16036</span>, <span class="fl">16037</span>, <span class="fl">16038</span>, <span class="fl">16039</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">time</span><span class="op">)</span>  <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># arrange by hour</span>
  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/pkg/ggmap/man/ggmap.html" class="external-link">ggmap</a></span><span class="op">(</span><span class="va">gmap</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df.tmp</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">recvDeployLon</span>, y <span class="op">=</span> <span class="va">recvDeployLat</span><span class="op">)</span>, 
             shape <span class="op">=</span> <span class="fl">21</span>, colour <span class="op">=</span> <span class="st">"black"</span>, fill <span class="op">=</span> <span class="st">"yellow"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_path</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">df.tmp</span>, 
            <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">recvDeployLon</span>, y <span class="op">=</span> <span class="va">recvDeployLat</span>, group <span class="op">=</span> <span class="va">motusTagID</span>, col <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">motusTagID</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html" class="external-link">scale_color_discrete</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"MotusTagID"</span><span class="op">)</span></code></pre></div>
<p><img src="06-exploring-data_files/figure-html/unnamed-chunk-21-1.png" width="700"> The functions above provide examples of how you can begin exploring your data and are by no means exhaustive.</p>
<blockquote>
<p><strong>What Next?</strong> <a href="index.html">Explore all articles</a></p>
</blockquote>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Birds Canada, John Brzustowski, Denis Lepage.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
