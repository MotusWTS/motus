<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Creates a summary for each tag of it's first and last detection time (ts),
first and last detection site, length of time between first and last
detection, straight line distance between first and last detection site, rate
of movement, and bearing. Lat/lons are taken from gpsLat/gpsLon, or if
missing, from recvDeployLat/recvDeployLon. Bearing is calculated using
the geosphere::bearing() function."><title>General summary of detections for each tag — tagSum • motus</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="General summary of detections for each tag — tagSum"><meta property="og:description" content="Creates a summary for each tag of it's first and last detection time (ts),
first and last detection site, length of time between first and last
detection, straight line distance between first and last detection site, rate
of movement, and bearing. Lat/lons are taken from gpsLat/gpsLon, or if
missing, from recvDeployLat/recvDeployLon. Bearing is calculated using
the geosphere::bearing() function."><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-dark"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">motus</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">6.0.1.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/motus.html">Get started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/01-introduction.html">Chapter 1 - Introduction</a>
    <a class="dropdown-item" href="../articles/02-installing-packages.html">Chapter 2 - Installing packages</a>
    <a class="dropdown-item" href="../articles/03-accessing-data.html">Chapter 3 - Accessing detections data</a>
    <a class="dropdown-item" href="../articles/04-deployments.html">Chapter 4 - Tag and receiver deployments</a>
    <a class="dropdown-item" href="../articles/05-data-cleaning.html">Chapter 5 - Data Cleaning</a>
    <a class="dropdown-item" href="../articles/06-exploring-data.html">Chapter 6 - Exploring detections data</a>
    <div class="dropdown-divider"></div>
    <a class="dropdown-item" href="../articles/index.html">More articles...</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../articles/troubleshooting.html">Troubleshooting</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Functions</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/MotusWTS/motus/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>General summary of detections for each tag</h1>
      <small class="dont-index">Source: <a href="https://github.com/MotusWTS/motus/blob/HEAD/R/tagSum.R" class="external-link"><code>R/tagSum.R</code></a></small>
      <div class="d-none name"><code>tagSum.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a summary for each tag of it's first and last detection time (<code>ts</code>),
first and last detection site, length of time between first and last
detection, straight line distance between first and last detection site, rate
of movement, and bearing. Lat/lons are taken from <code>gpsLat</code>/<code>gpsLon</code>, or if
missing, from <code>recvDeployLat</code>/<code>recvDeployLon</code>. Bearing is calculated using
the <code><a href="https://rdrr.io/pkg/geosphere/man/bearing.html" class="external-link">geosphere::bearing()</a></code> function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tagSum</span><span class="op">(</span><span class="va">df_src</span>, <span class="va">data</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>df_src</dt>
<dd><p>Data frame, SQLite connection, or SQLite table. An SQLite
connection would be the result of <code>tagme(XXX)</code> or
<code>DBI::dbConnect(RSQLite::SQLite(), "XXX.motus")</code>; an SQLite table would be
the result of <code>dplyr::tbl(tags, "alltags")</code>; a data frame could be the
result of <code>dplyr::tbl(tags, "alltags") %&gt;% dplyr::collect()</code>.</p></dd>


<dt>data</dt>
<dd><p>Defunct, use <code>src</code>, <code>df_src</code>, or <code>df</code> instead.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A flat data frame with the following for each tag:</p><ul><li><p><code>fullID</code> - <code>fullID</code> of Motus registered tag</p></li>
<li><p><code>first_ts</code> - Time (<code>ts</code>) of first detection</p></li>
<li><p><code>last_ts</code> - Time (<code>ts</code>) of last detection</p></li>
<li><p><code>first_site</code> - First detection site (<code>recvDeployName</code>)</p></li>
<li><p><code>last_site</code> - Last detection site (<code>recvDeployName</code>)</p></li>
<li><p><code>recvLat.x</code> - Latitude of first detection site (<code>gpsLat</code> or <code>recvDeployLat</code>)</p></li>
<li><p><code>recvLon.x</code> - Longitude of first detection site (<code>gpsLon</code> or <code>recvDeployLon</code>)</p></li>
<li><p><code>recvLat.y</code> - Latitude of last detection site (<code>gpsLat</code> or <code>recvDeployLat</code>)</p></li>
<li><p><code>recvLon.y</code> - Longitude of last detection site (<code>gpsLon</code> or <code>recvDeployLon</code>)</p></li>
<li><p><code>tot_ts</code> - Time between first and last detection (in seconds)</p></li>
<li><p><code>dist</code> - Straight line distance between first and last detection site (in metres)</p></li>
<li><p><code>rate</code> - Overall rate of movement (<code>tot_ts</code>/<code>dist</code>), in metres/second</p></li>
<li><p><code>bearing</code> - Bearing between first and last detection sites</p></li>
<li><p><code>num_det</code> - Number of detections summarized</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Download sample project 176 to .motus database (username/password are "motus.sample")</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="va">sql_motus</span> <span class="op">&lt;-</span> <span class="fu"><a href="tagme.html">tagme</a></span><span class="op">(</span><span class="fl">176</span>, new <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Or use example data base in memory</span></span></span>
<span class="r-in"><span><span class="va">sql_motus</span> <span class="op">&lt;-</span> <span class="fu"><a href="tagmeSample.html">tagmeSample</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Summarize tags</span></span></span>
<span class="r-in"><span><span class="va">tag_summary</span> <span class="op">&lt;-</span> <span class="fu">tagSum</span><span class="op">(</span><span class="va">sql_motus</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 'df_src' is a complete motus data base, using 'alltagsGPS' view</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For specific SQLite table/view (needs gpsLat/gpsLon) --------------</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tbl_alltagsGPS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tbl.html" class="external-link">tbl</a></span><span class="op">(</span><span class="va">sql_motus</span>, <span class="st">"alltagsGPS"</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="va">tag_summary</span> <span class="op">&lt;-</span> <span class="fu">tagSum</span><span class="op">(</span><span class="va">tbl_alltagsGPS</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># For a flattened data frame ----------------------------------------</span></span></span>
<span class="r-in"><span><span class="va">df_alltagsGPS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/compute.html" class="external-link">collect</a></span><span class="op">(</span><span class="va">tbl_alltagsGPS</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tag_summary</span> <span class="op">&lt;-</span> <span class="fu">tagSum</span><span class="op">(</span><span class="va">df_alltagsGPS</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Can be filtered, e.g., for only a few tags</span></span></span>
<span class="r-in"><span><span class="va">tag_summary</span> <span class="op">&lt;-</span> <span class="fu">tagSum</span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">tbl_alltagsGPS</span>, <span class="va">motusTagID</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">16047</span>, <span class="fl">16037</span>, <span class="fl">16039</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Birds Canada, John Brzustowski, Denis Lepage.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

